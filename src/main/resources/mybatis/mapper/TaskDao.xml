<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jiangjun.dao.TaskDao">
    <resultMap id="Task" type="com.jiangjun.entity.Task">
        <id property="taskId" column="task_id"/>
        <result property="taskName" column="task_name"/>
        <result property="beginDate" column="begin_date"/>
        <result property="endDate" column="end_date"/>
        <result property="realBeginDate" column="real_begin_date"/>
        <result property="realEndDate" column="real_end_date"/>
        <result property="status" column="status"/>
        <result property="implementorId" column="implementor_id"/>
        <result property="assignerId" column="assigner_id"/>
        <result property="taskDesc" column="task_desc"/>
    </resultMap>
    <!--根据编号修改-->
    <update id="update" parameterType="com.jiangjun.entity.Task">
        update t_task
        <set>
            <if test="taskName != null and taskName != ''">
                task_name = #{taskName},
            </if>
            <if test="beginDate != null">
                begin_date = #{beginDate},
            </if>
            <if test="endDate != null">
                end_date = #{endDate},
            </if>
            <if test="realBeginDate != null">
                real_begin_date = #{realBeginDate},
            </if>
            <if test="realEndDate != null">
                real_end_date = #{realEndDate},
            </if>
            <if test="status != null and status != ''">
                status = #{status},
            </if>
            <if test="implementorId != null">
                implementor_id = #{implementorId},
            </if>
            <if test="assignerId != null">
                assigner_id = #{assignerId},
            </if>
            <if test="taskDesc != null and taskDesc != ''">
                task_desc = #{taskDesc},
            </if>
        </set>
        where task_id = #{taskId}
    </update>
    <insert id="insert" parameterType="com.jiangjun.entity.Task">
        insert into t_task(task_name, begin_date, end_date, real_begin_date, real_end_date, status, implementor_id,
        assigner_id, task_desc)
        values (#{taskName}, #{beginDate}, #{endDate}, #{realBeginDate}, #{realEndDate}, #{status}, #{implementorId},
        #{assignerId}, #{taskDesc})
    </insert>
    <delete id="deleteById" parameterType="com.jiangjun.entity.Task">
        delete from dt.t_task where task_id = #{taskId}
    </delete>
    <select id="queryAll" resultMap="Task">
        select
        task_id, task_name, begin_date, end_date, real_begin_date, real_end_date, status, implementor_id, assigner_id,
        task_desc
        from t_task
        <where>
            <if test="taskId != null">
                and task_id = #{taskId}
            </if>
            <if test="taskName != null and taskName != ''">
                and task_name = #{taskName}
            </if>
            <if test="beginDate != null">
                and begin_date = #{beginDate}
            </if>
            <if test="endDate != null">
                and end_date = #{endDate}
            </if>
            <if test="realBeginDate != null">
                and real_begin_date = #{realBeginDate}
            </if>
            <if test="realEndDate != null">
                and real_end_date = #{realEndDate}
            </if>
            <if test="status != null and status != ''">
                and status = #{status}
            </if>
            <if test="implementorId != null">
                and implementor_id = #{implementorId}
            </if>
            <if test="assignerId != null">
                and assigner_id = #{assignerId}
            </if>
            <if test="taskDesc != null and taskDesc != ''">
                and task_desc = #{taskDesc}
            </if>
        </where>
    </select>
    <select id="queryById" resultMap="Task">
        select *from t_task where task_id = #{taskId}
    </select>
</mapper>